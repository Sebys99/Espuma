  body {
    background-color: rgba(83, 39, 72, 0.83);
  }

  main {
    width: 90vw;               /* Escala con el viewport */
    max-width: 1000px;         /* No se agranda más allá de 1000px */
    margin-left: auto;
    margin-right: auto;
    margin: 0 auto;            /* Centrado horizontal */
    position: relative;        /* Necesario para posicionar spikes absolutamente dentro */
  }

  .chat-fase-1 {
    position: relative;
    width: 130vw; 
    max-width: 1060px;
    margin: 0 auto;
  }

  .chat-fase-1 svg {
    width: 100%;
    height: auto;
    display: block;
  }

  .st10 {
  font-family: 'Rubik Glitch';
  font-style: normal;
  font-weight: 400;
  color: white;
  font-size: 1.4em;
  }

  img {
    width: 100%;
    height: auto;
  }


  /* -------------------------------------------------- FASE 1----------------------------------------------- */	
  .spike1-fase-1,
  .spike2-fase-1,
  .spike3-fase-1,
  .spike4-fase-1,
  .spike5-fase-1,
  .spike6-fase-1 {
    position: absolute;
    width: 19%;
    height: auto;
    z-index: -1;
    display: none;
  }

  .spike1-fase-1 {
    top: 2%;
    left: 0%;
    --rot: -27deg;
    transform: rotate(var(--rot));
  }


  .spike1-fase-1 img {
    width: 100%;
    height: auto;
    animation: 
    spike-glitch-interval 3s infinite linear,
    spike-color-cycle 3s infinite linear;
    mix-blend-mode: screen;
  }

  .spike2-fase-1 {
    top: 3%;
    left: 97%;
    --rot: -13deg;
    transform: rotate(var(--rot));
  }


  .spike2-fase-1 img {
    width: 100%;
    height: auto;
    animation: 
    spike-glitch-interval 1s infinite linear,
    spike-color-cycle 1s infinite linear;
    mix-blend-mode: screen;
  }

  .spike3-fase-1 {
    top: 40%;
    right: 95%;
    --rot: 0deg;
    transform: rotate(var(--rot));
    animation: spike-glitch 0.3s infinite linear;
  }

  .spike4-fase-1 {
    top: 50%;
    right: 15%;
    --rot: 10deg;
    transform: rotate(var(--rot));
  }

  .spike5-fase-1 {
    top: 69%;
    left: 21%;
    --rot: 12deg;
    transform: rotate(var(--rot));
  }

  .spike5-fase-1 img {
    width: 100%;
    height: auto;
    animation: 
    spike-glitch-interval 5s infinite linear,
    spike-color-cycle 5s infinite linear;
    mix-blend-mode: screen;
  }


  .spike6-fase-1 {
    top: 70%;
    left: 100%;
    --rot: 90deg;
    transform: rotate(var(--rot));
  }

  .spike6-fase-1 img {
    width: 100%;
    height: auto;
    animation: 
    spike-glitch-interval 3s infinite linear,
    spike-color-cycle 3s infinite linear;
    mix-blend-mode: screen;
  }

  /* -------------------------------------------------- FASE 2----------------------------------------------- */
  .spike1-fase-2,
  .spike2-fase-2,
  .spike3-fase-2,
  .spike4-fase-2,
  .spike5-fase-2,
  .spike6-fase-2 {
    position: absolute;
    width: 19%;
    height: auto;
    z-index: -1;
    display: none;
  }

  .spike1-fase-2 {
    top: 2%;
    left: 0%;
    --rot: -27deg;
    transform: rotate(var(--rot));
  }


  .spike1-fase-2 img {
    width: 100%;
    height: auto;
    animation: 
    spike-color-cycle-fase2 3s infinite linear,
    rotarYglitchear 10s infinite linear;
    mix-blend-mode: screen;
  }

  .spike2-fase-2 {
    top: 3%;
    left: 97%;
    --rot: -13deg;
    transform: rotate(var(--rot));
  }


  .spike2-fase-2 img {
    width: 100%;
    height: auto;
    animation: 
    spike-glitch-interval-fase2 1s infinite linear,
    spike-color-cycle-fase2 1s infinite linear;
    mix-blend-mode: screen;
  }

  .spike3-fase-2 {
    top: 40%;
    right: 95%;
    --rot: 0deg;
    transform: rotate(var(--rot));
  }

  .spike3-fase-2 img {
    width: 100%;
    height: auto;
    animation: 
    spike-glitch-interval 0.3s infinite linear,
    spike-color-cycle 0.3s infinite linear;
    mix-blend-mode: screen;
  }

  .spike4-fase-2 {
    top: 50%;
    right: 15%;
    --rot: 10deg;
    transform: rotate(var(--rot));
  }

  .spike4-fase-2 img {
    width: 100%;
    height: auto;
    animation: 
    spike-glitch-interval-fase2 1s infinite linear,
    spike-color-cycle-fase2 1s infinite linear;
    mix-blend-mode: screen;
  }

  .spike5-fase-2 {
    top: 69%;
    left: 21%;
    --rot: 12deg;
    transform: rotate(var(--rot));
  }

  .spike5-fase-2 img {
    width: 100%;
    height: auto;
    animation: 
    spike-glitch-interval-fase2 5s infinite linear,
    spike-color-cycle-fase2 5s infinite linear;
    mix-blend-mode: screen;
  }


  .spike6-fase-2 {
    top: 70%;
    left: 100%;
    --rot: 90deg;
    transform: rotate(var(--rot));
  }

  .spike6-fase-2 img {
    width: 100%;
    height: auto;
    animation: 
    spike-glitch-interval-fase2 3s infinite linear,
    spike-color-cycle-fase2 3s infinite linear,
    rotarYglitchear-reversa 10s infinite linear;
    mix-blend-mode: screen;
  }
  /* -------------------------------------------------- FASE 3----------------------------------------------- */
  .spike1-fase-3,
  .spike2-fase-3,
  .spike3-fase-3,
  .spike4-fase-3,
  .spike5-fase-3,
  .spike6-fase-3 {
    position: absolute;
    width: 19%;
    height: auto;
    z-index: -1;
    display: none;
  }

  .spike1-fase-3 {
    top: 2%;
    left: 0%;
    --rot: -27deg;
    transform: rotate(var(--rot));
  }


  .spike1-fase-3 img {
    width: 100%;
    height: auto;
    animation: 
    spike-color-cycle-fase2 1.5s infinite linear,
    rotarYglitchear 5s infinite linear;
    mix-blend-mode: screen;
  }

  .spike2-fase-3 {
    top: 3%;
    left: 97%;
    --rot: -13deg;
    transform: rotate(var(--rot));
  }


  .spike2-fase-3 img {
    width: 100%;
    height: auto;
    animation: 
    spike-glitch-interval-fase2 0.6s infinite linear,
    spike-color-cycle-fase2 0.6s infinite linear;
    mix-blend-mode: screen;
  }

  .spike3-fase-3 {
    top: 40%;
    right: 95%;
    --rot: 0deg;
    transform: rotate(var(--rot));
  }

  .spike3-fase-3 img {
    width: 100%;
    height: auto;
    animation: 
    spike-glitch-interval 0.3s infinite linear,
    spike-color-cycle 0.3s infinite linear;
    mix-blend-mode: screen;
  }

  .spike4-fase-3 {
    top: 50%;
    right: 15%;
    --rot: 10deg;
    transform: rotate(var(--rot));
  }

  .spike4-fase-3 img {
    width: 100%;
    height: auto;
    animation: 
    spike-glitch-interval 3s infinite linear,
    spike-color-cycle 3s infinite linear;
    mix-blend-mode: screen;
  }

  .spike5-fase-3 {
    top: 69%;
    left: 21%;
    --rot: 12deg;
    transform: rotate(var(--rot));
  }

  .spike5-fase-3 img {
    width: 100%;
    height: auto;
    animation: 
    spike-glitch-interval 5s infinite linear,
    spike-color-cycle 5s infinite linear,
    girar-lento 10s infinite linear;
    mix-blend-mode: screen;
  }


  .spike6-fase-3 {
    top: 70%;
    left: 100%;
    --rot: 90deg;
    transform: rotate(var(--rot));
  }

  .spike6-fase-3 img {
    width: 100%;
    height: auto;
    animation: 
    spike-glitch-interval-fase2 3s infinite linear,
    spike-color-cycle-fase2 3s infinite linear,
    rotarYglitchear-reversa 4s infinite linear;
    mix-blend-mode: screen;
  }

/* -------------------------------------------------- FASE 4-SPIKES ADICIONALES. ----------------------------------------------- */




/* -------------------------------------------------- ADICIONALES ----------------------------------------------- */
  
  /* Burbuja 2 */
  .st2 {
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.8s ease, visibility 0.8s ease;
  }

  .st50 {
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.8s ease, visibility 0.8s ease;
  }

  /* Burbuja 3 */
  .st11 {
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.8s ease, visibility 0.8s ease;
  }

  .st12 {
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.8s ease, visibility 0.8s ease;
  }

  /* Texto burbuja 4 */
  .st6 {
    display: none;
  }

  .st61 {
    display: none;
  }


/* -------------------------------------------------- CAMBIOS DE FASES----------------------------------------------- */
  body[data-hash=""] #fase1
  {
    display: block;
  }




  body[data-hash="fase2"] #fase2,
  body[data-hash="fase2"] .st6
  {
    display: block;
    opacity: 1;
    visibility: visible;
  }

  body[data-hash="fase2"] {
  animation: fondo-animado-2 1s linear forwards;
  background-color: rgba(83, 39, 72, 0.83);
  }





  body[data-hash="fase3"] #fase3,
  body[data-hash="fase3"] .st2,
  body[data-hash="fase3"] .st50,
  body[data-hash="fase3"] .st61
  {
    display: block;
    opacity: 1;
    visibility: visible;
  }

  body[data-hash="fase3"] {
  animation: fondo-animado-3 0.7s linear forwards;
  background-color: rgba(83, 39, 72, 0.83);
  }




  body[data-hash="fase4"] #fase4,
  body[data-hash="fase4"] .st2,
  body[data-hash="fase4"] .st50,
  body[data-hash="fase4"] .st11,
  body[data-hash="fase4"] .st12,
  body[data-hash="fase4"] .st61,
  body[data-hash="fase4"] .spike1-fase-3,
  body[data-hash="fase4"] .spike2-fase-3,
  body[data-hash="fase4"] .spike3-fase-3,
  body[data-hash="fase4"] .spike4-fase-3,
  body[data-hash="fase4"] .spike5-fase-3,
  body[data-hash="fase4"] .spike6-fase-3 {
    display: block;
    opacity: 1;
    visibility: visible;
  }

  body[data-hash="fase4"] {
  animation: 
  fondo-animado-4 0.1s linear infinite;
  background-color: rgba(83, 39, 72, 0.83);
  }

  body[data-hash="fase4"] .chat-fase-1 {
  animation: 
  glitch-chat 0.9s linear infinite;
  }



  body[data-hash="fase4"] .spike1-fase-3 {
    animation: 
    spike-color-cycle-fase2 0.5s infinite linear,
    rotarYglitchear 2s infinite linear;
  }

  body[data-hash="fase4"] .spike2-fase-3{
    animation: 
    spike-glitch-interval-fase2 0.4s infinite linear,
    spike-color-cycle-fase2 0.4s infinite linear;
  }
  body[data-hash="fase4"] .spike3-fase-3{
    animation: 
    spike-glitch-interval 0.3s infinite linear,
    spike-color-cycle 0.3s infinite linear;
  }
  body[data-hash="fase4"] .spike4-fase-3{
    animation: 
    spike-glitch-interval 1.5s infinite linear,
    spike-color-cycle 1.5s infinite linear;

  }
  body[data-hash="fase4"] .spike5-fase-3{
    animation: 
    spike-glitch-interval 2s infinite linear,
    spike-color-cycle 2s infinite linear,
    girar-lento 4s infinite linear;

  }
  body[data-hash="fase4"] .spike6-fase-3{
    animation: 
    spike-glitch-interval-fase2 2.3s infinite linear,
    spike-color-cycle-fase2 2.3s infinite linear,
    rotarYglitchear-reversa 3.2s infinite linear;
  }


/* -------------------------------------------------- ANIMACIONES----------------------------------------------- */
/* -------------------------------------------------- FASE 1----------------------------------------------- */

@keyframes spike-glitch-interval {
    0%   { transform: translate(0, 0) rotate(var(--rot)); }
    2%   { transform: translate(3px, -3px) rotate(var(--rot)); }
    4%   { transform: translate(-3px, 3px) rotate(var(--rot)); }
    6%   { transform: translate(4px, 4px) rotate(var(--rot)); }
    8%   { transform: translate(-4px, -4px) rotate(var(--rot)); }
    100%  { transform: translate(0, 0) rotate(var(--rot)); }
  }
    /*animation: fondo-animado .5s infinite alternate;*/


  @keyframes spike-color-cycle {
    0%   { filter: none; }
    2%   { filter: drop-shadow(0 0 2px #f00) drop-shadow(0 0 2px #00f); }
    10%  { filter: drop-shadow(0 0 2px #f00) drop-shadow(0 0 2px #00f); }
    100% { filter: none; }
  }

/* -------------------------------------------------- FASE 2----------------------------------------------- */
    @keyframes spike-glitch-interval-fase2 {
    0%   { transform: translate(0, 0) rotate(var(--rot)); }
    2%   { transform: translate(3px, -3px) rotate(var(--rot)); }
    4%   { transform: translate(4px, 4px) rotate(var(--rot)); }
    6%   { transform: translate(-4px, -4px) rotate(var(--rot)); }
    100%  { transform: translate(0, 0) rotate(var(--rot)); }
  }


  @keyframes spike-color-cycle-fase2 {
    0%   { filter: none; }
    2%   { filter: drop-shadow(0 0 2px #f00) drop-shadow(0 0 2px #00f); }
    6%  { filter: drop-shadow(0 0 2px #f00) drop-shadow(0 0 2px #00f); }
    100% { filter: none; }
  }


    @keyframes rotarYglitchear {
  0%   { transform: rotate(0deg) translate(0, 0); }
  10%  { transform: rotate(36deg) translate(3px, -3px); }
  20%  { transform: rotate(72deg) translate(4px, 4px); }
  30%  { transform: rotate(108deg) translate(-4px, -4px); }
  40%  { transform: rotate(144deg) translate(3px, 3px); }
  50%  { transform: rotate(180deg) translate(0, 0); }
  60%  { transform: rotate(216deg) translate(-3px, 3px); }
  70%  { transform: rotate(252deg) translate(2px, -2px); }
  80%  { transform: rotate(288deg) translate(0px, 2px); }
  90%  { transform: rotate(324deg) translate(-2px, 0); }
  100% { transform: rotate(360deg) translate(0, 0); }
}


@keyframes rotarYglitchear-reversa {
  0%   { transform: rotate(0deg) translate(0, 0); }
  10%  { transform: rotate(-36deg) translate(3px, -3px); }
  20%  { transform: rotate(-72deg) translate(4px, 4px); }
  30%  { transform: rotate(-108deg) translate(-4px, -4px); }
  40%  { transform: rotate(-144deg) translate(3px, 3px); }
  50%  { transform: rotate(-180deg) translate(0, 0); }
  60%  { transform: rotate(-216deg) translate(-3px, 3px); }
  70%  { transform: rotate(-252deg) translate(2px, -2px); }
  80%  { transform: rotate(-288deg) translate(0px, 2px); }
  90%  { transform: rotate(-324deg) translate(-2px, 0); }
  100% { transform: rotate(-360deg) translate(0, 0); }
}


  @keyframes cambio-color {
  0% {
    filter: hue-rotate(0deg);
  }
  50% {
    filter: hue-rotate(180deg);
  }
  100% {
    filter: hue-rotate(360deg);
  }
}


@keyframes girar-lento {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}


  @keyframes fondo-animado-2 {
    0%   { background-color: white; }  /* púrpura */
    25%  { background-color: #5b3c64; }  /* vino más suave */
    50%  { background-color: black; }  /* más rojizo */
    75%  { background-color: white; }  /* morado oscuro */
    100% { background-color: rgba(83, 39, 72, 0.83) } /* vuelve al original */
  }
/* -------------------------------------------------- FASE 3----------------------------------------------- */
    @keyframes fondo-animado-3 {
    0%   { background-color: white; }  /* púrpura */
    25%  { background-color: #5b3c64; }  /* vino más suave */
    50%  { background-color: black; }  /* más rojizo */
    75%  { background-color: white; }  /* morado oscuro */
    100% { background-color: rgba(83, 39, 72, 0.83) } /* vuelve al original */
  }



/* -------------------------------------------------- FASE 4----------------------------------------------- */
  @keyframes fondo-animado-4 {
    0%   { background-color: white; }  /* púrpura */
    25%  { background-color: #5b3c64; }  /* vino más suave */
    50%  { background-color: black; }  /* más rojizo */
    75%  { background-color: white; }  /* morado oscuro */
    100% { background-color: rgba(83, 39, 72, 0.83) } /* vuelve al original */
  }



@keyframes glitch-chat {
  0%   { transform: translateX(0); }
  10%  { transform: translateX(-3px); }
  20%  { transform: translateX(3px); }
  30%  { transform: translateX(-5px); }
  40%  { transform: translateX(5px); }
  50%  { transform: translateX(-2px); }
  60%  { transform: translateX(2px); }
  70%  { transform: translateX(-1px); }
  80%  { transform: translateX(1px); }
  90%  { transform: translateX(0); }
  100% { transform: translateX(0); }
}